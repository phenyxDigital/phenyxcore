var expression_translated,list_type_for_theme=["front","plugins","pdf","mailplugins","pdfplugins"],list_type_for_plugin=["plugins","frontplugins","classplugins","adminplugins","mailplugins","pdfplugins"];function exportLanguage(){var n=new FormData($("form#exportLang")[0]);$.ajax({url:AjaxLinkAdminTranslations,type:"POST",data:n,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(n){n.success?Swal.fire({position:"top-end",icon:"success",title:n.message,showConfirmButton:!1,timer:4e3}):Swal.fire({position:"top-end",icon:"error",title:n.message,showConfirmButton:!1,timer:4e3})}})}function addThemeSelect(n){$.inArray(n,list_type_for_theme)>-1?($("#selectTheme").slideDown(),$("#theme").selectmenu({width:200,change:function(e,a){if("front"==n&&0==a.item.value)return!alert(theme_error);$("#theme_selected").val(a.item.value)}}),"front"==n?$("#core_choice").attr("disabled",!0):$("#core_choice").attr("disabled",!1),$("#theme").selectmenu("refresh")):($("#selectTheme").slideUp(),$("#theme_selected").val(default_theme))}function chooseTypeTranslation(n,e=0){var a=new FormData($("form#formTranslation")[0]);1==e&&a.append("action","managePack");for(const n of a.entries())console.log(n[0],n[1]);$.ajax({url:AjaxLinkAdminTranslations,type:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(n){$("#content").removeClass("page-is-changing"),$(".cd-loading-bar").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){isAnimating=!1,$(".cd-loading-bar").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})),n.success?($("#tabs-AdminDashboard").append(n.li),$("#tabs-AdminDashboard-content").append(n.html),$("#content_AdminDashboard").slideDown(),$("#content_AdminDashboard").tabs("refresh"),$("#uperTranslate"+n.target+" a").trigger("click")):Swal.fire({position:"top-end",icon:"error",title:n.message,showConfirmButton:!1,timer:4e3})}})}function apiTranslate(n){$("#smTranslate"+n).prop("disabled",!0),$("#rmTranslate"+n).prop("disabled",!0);var e=[];if($("#"+n).pqGrid("instance")){var a=$("#"+n).pqGrid("instance"),t=a.getData();$.each(t,(function(n,i){if(""==i.traduction){var s={};for(var o in t=a.getRowData({rowIndx:n}),s.rowIndx=n,t)t.hasOwnProperty(o)&&(s[o]=t[o]);e.push(s)}}))}else console.log("no instance");proceedApiTranslate(n,e)}function resetTranslate(n){var e=parseInt($("#li_"+n).attr("data-size"));$("#missing_"+n).text(e+" "+missing_translations),$("#rmTranslate"+n).prop("disabled",!0),$("#smTranslate"+n).prop("disabled",!0);var a=[];if($("#"+n).pqGrid("instance")){var t=$("#"+n).pqGrid("instance"),i=t.getData();$.each(i,(function(n,e){var s={};for(var o in i=t.getRowData({rowIndx:n}),s.rowIndx=n,i)i.hasOwnProperty(o)&&(s[o]=i[o]);a.push(s)}))}else console.log("no instance");proceedApiTranslate(n,a)}function proceedApiTranslate(n,e){var a=parseInt($("#missing_"+n).text()),t=$("#currentTab").val(),i=$("#"+n).pqGrid("instance"),s=e.length,o=0,r="",l=s;$("#"+n+" .pq-grid-title").html(t+" "+search_translation+' <span id="ace-countdonwn">'+l+"</span> "+to_remain),$.each(e,(function(e,d){if(r=d.expression,"en"==lang_selected){i.deleteRow({rowIndx:d.rowIndx});var c={parent:d.parent,name:d.name,expression:d.expression,traduction:d.expression,use_sprintf:d.use_sprintf};i.addRow({rowData:c,rowIndx:d.rowIndx}),--a>1?$("#missing_"+n).text(a+" "+missing_translations):$("#missing_"+n).text(a+" "+missing_translation),l--,$("#ace-countdonwn").html(l),++o==s&&$("#"+n+" .pq-grid-title").html(t+" "+translation_complete)&&$("#smTranslate"+n).prop("disabled",0)&&$("#rmTranslate"+n).prop("disabled",0)&&$("#smTranslate"+n).html(missing_tag.replace(/%s/g,a))}else $.inArray(r,javaFound)&&void 0!==javaFound[r]?(i.deleteRow({rowIndx:d.rowIndx}),c={parent:d.parent,name:d.name,expression:d.expression,traduction:javaFound[r],use_sprintf:d.use_sprintf},i.addRow({rowData:c,rowIndx:d.rowIndx}),l--,$("#ace-countdonwn").html(l),--a>1?$("#missing_"+n).text(a+" "+missing_translations):$("#missing_"+n).text(a+" "+missing_translation),++o==s&&$("#"+n+" .pq-grid-title").html(t+" "+translation_complete)&&$("#smTranslate"+n).prop("disabled",0)&&$("#rmTranslate"+n).prop("disabled",0)&&$("#smTranslate"+n).html(missing_tag.replace(/%s/g,a))):(toastr.clear(),$.ajaxq("TranslateProcess",{url:AjaxLinkAdminTranslations,type:"POST",dataType:"json",data:{action:"getGoogleTranslation",text:d.expression,target:lang_selected,ajax:!0}}).success((function(e){expression_translated=e.translation,i.deleteRow({rowIndx:d.rowIndx}),javaFound[d.expression]=expression_translated;var r={parent:d.parent,name:d.name,expression:d.expression,traduction:expression_translated,use_sprintf:d.use_sprintf};i.addRow({rowData:r,rowIndx:d.rowIndx}),l--,$("#ace-countdonwn").html(l),$("#smTranslate"+n).html(missing_tag.replace(/%s/g,l)),--a>1?($("#missing_"+n).text(a+" "+missing_translations),$("#smTranslate"+n).html(missing_tag.replace(/%s/g,a))):$("#missing_"+n).text(a+" "+missing_translation),++o==s&&$("#"+n+" .pq-grid-title").html(t+" "+translation_complete)&&$("#smTranslate"+n).prop("disabled",0)&&$("#rmTranslate"+n).prop("disabled",0)&&$("#smTranslate"+n).html(missing_tag.replace(/%s/g,0))})))}))}function getGoogleTranslation(n){return $("#ajax_running").slideDown(),"ID"==n?n:($.ajax({type:"POST",url:AjaxLinkAdminTranslations,data:{action:"getGoogleTranslation",text:n,target:lang_selected,ajax:!0},async:!1,dataType:"json",success:function(n){$("#ajax_running").slideUp(),e=n.translation}}),e);var e}function updateTranslation(n){$.ajax({type:"POST",url:AjaxLinkAdminTranslations,data:{action:"updateTranslation",expression:n.expression,traduction:n.traduction,iso:lang_selected,ajax:!0},async:!0,dataType:"json"}),javaFound[n.expression]=n.traduction}function saveTranslations(n){$("#save_translation_btn").prop("disabled",!0);var e="",a=new FormData($("form#translations_form")[0]);$(".translation-tab-content").each((function(n,e){$(this).hasClass("not-loaded")&&(varGrid=$(this).attr("data-var"),idGrid=$(this).attr("data-id"),varGrid=$(this).attr("data-var"),gridCollection.push(idGrid),objRequest="init"+$(this).attr("data-obj"),objGrid=window[objRequest](),varGrid=pq.grid("#"+idGrid,objGrid),$(this).removeClass("not-loaded"))})),$.each(gridCollection,(function(t,i){if($.inArray(n,list_type_for_plugin)>-1){e=i.replace("grid_","");var s=[]}if($("#"+i).pqGrid("instance")){var o=(i=$("#"+i).pqGrid("instance")).getData();$.inArray(n,list_type_for_plugin)>-1?($.each(o,(function(n,e){s.push({expression:e.expression,name:e.name,value:e.traduction})})),a.append(e,JSON.stringify(s))):$.each(o,(function(n,e){var t=[];t.push({expression:e.expression,traduction:e.traduction,name:e.name}),a.append(e.name,JSON.stringify(t))}))}else console.log("no instance")})),$("#ajax_running").slideDown(),$.ajax({url:AjaxLinkAdminTranslations,type:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(n){n.success?Swal.fire({position:"top-end",icon:"success",title:n.message,showConfirmButton:!1,timer:4e3}):Swal.fire({position:"top-end",icon:"error",title:n.message,showConfirmButton:!1,timer:4e3})},complete:function(e){$("#ajax_running").slideUp(),$("#uperTranslate"+n).remove(),$("#contentTranslate"+n).remove(),$("#uperAdminTranslations a").trigger("click")}})}function saveTranslationsAndStay(n){$("#save_and_staytranslation_btn").prop("disabled",!0);var e="",a=new FormData($("form#translations_form")[0]);$(".translation-tab-content").each((function(n,e){$(this).hasClass("not-loaded")&&(varGrid=$(this).attr("data-var"),idGrid=$(this).attr("data-id"),varGrid=$(this).attr("data-var"),gridCollection.push(idGrid),objRequest="init"+$(this).attr("data-obj"),objGrid=window[objRequest](),varGrid=pq.grid("#"+idGrid,objGrid),$(this).removeClass("not-loaded"))})),$.each(gridCollection,(function(t,i){if($.inArray(n,list_type_for_plugin)>-1){e=i.replace("grid_","");var s=[]}if($("#"+i).pqGrid("instance")){var o=(i=$("#"+i).pqGrid("instance")).getData();$.inArray(n,list_type_for_plugin)>-1?($.each(o,(function(n,e){s.push({expression:e.expression,name:e.name,value:e.traduction})})),a.append(e,JSON.stringify(s))):$.each(o,(function(n,e){var t=[];t.push({expression:e.expression,traduction:e.traduction,name:e.name}),a.append(e.name,JSON.stringify(t))}))}else console.log("no instance")})),$("#ajax_running").slideDown(),$.ajax({url:AjaxLinkAdminTranslations,type:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(n){n.success?(Swal.fire({position:"top-end",icon:"success",title:n.message,showConfirmButton:!1,timer:3e3}),$("#ajax_running").slideUp(),$("#save_and_staytranslation_btn").prop("disabled",!1)):Swal.fire({position:"top-end",icon:"error",title:n.message,showConfirmButton:!1,timer:4e3})}})}function mergeLanguage(){$.ajax({type:"POST",url:AjaxLinkAdminTranslations,data:{action:"mergeLanguage",lang_selected:lang_selected,ajax:!0},async:!1,dataType:"json",success:function(n){n.success?Swal.fire({position:"top-end",icon:"success",title:n.message,showConfirmButton:!1,timer:4e3}):Swal.fire({position:"top-end",icon:"error",title:n.message,showConfirmButton:!1,timer:4e3})}})}function checkTranslateBoxes(n){$(".checkboxType").each((function(e,a){n?$(this).prop("checked",!0):$(this).prop("checked",!1)})),$(".checkboxType").checkboxradio("refresh")}function closeForm(n){$("#uperTranslate"+n).remove(),$("#contentTranslate"+n).remove(),$("#uperAdminTranslations a").trigger("click")}function manageTranslatePack(){var n=$("#translations-languages").val();"null"==n?Swal.fire({position:"top-end",icon:"error",title:select_language,showConfirmButton:!1,timer:4e3}):($("#content").addClass("page-is-changing"),$(".cd-loading-bar").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){isAnimating=!0,chooseTypeTranslation(n,1),$(".cd-loading-bar").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})))}function gridTranslate(){var n=$("#translations-languages").val();if("null"==n)return!alert(select_language);$("#content").addClass("page-is-changing"),$(".cd-loading-bar").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){isAnimating=!0,chooseTypeTranslation(n),$(".cd-loading-bar").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}))}$(document).ready((function(){$("#selectTheme").slideUp(),$("#type").selectmenu({change:function(n,e){addThemeSelect($.trim(e.item.value))}}),$("#translations-languages").selectmenu({change:function(n,e){0!=e.item.value?(lang_selected=e.item.value,0!=$("#type").val()&&($("#modify-translations").prop("disabled",!1),$("#manage-packs").prop("disabled",!1)),$("#merge_language").slideDown()):($("#modify-translations").prop("disabled",!0),$("#manage-packs").prop("disabled",!0),$("#merge_language").slideUp())}}),$("#params_import_language").selectmenu(),$("#iso_code").selectmenu(),$("#export-theme").selectmenu(),$("#fromLang").selectmenu(),$("#from-theme").selectmenu(),$("#toLang").selectmenu(),$("#to_theme").selectmenu(),$(document).on("submit","form#form_submitLang",(function(n){return n.preventDefault(),!1})),$("#submitCopyLang").on("click",(function(n){n.preventDefault(),$("#submitCopyLang").prop("disabled",!0),$("#ajax_running").slideDown();var e=new FormData($("form#form_submitLang")[0]);$.ajax({url:AjaxLinkAdminTranslations,type:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(n){n.success?(Swal.fire({position:"top-end",icon:"success",title:n.message,showConfirmButton:!1,timer:4e3}),$("#ajax_running").slideUp(),$("#submitCopyLang").prop("disabled",!1),$("#tabTranslationForm").trigger("click")):Swal.fire({position:"top-end",icon:"error",title:n.message,showConfirmButton:!1,timer:4e3})}})})),$(".submitAddLanguage").click((function(n){n.preventDefault();var e=$("form#submitAddLanguage").serialize();$.ajax({url:AjaxLinkAdminTranslations,type:"POST",data:e,dataType:"json",success:function(n){n.success?Swal.fire({position:"top-end",icon:"success",title:n.message,showConfirmButton:!1,timer:4e3}):Swal.fire({position:"top-end",icon:"error",title:n.message,showConfirmButton:!1,timer:4e3})},complete:function(n){$("#formTypeTranslationForm").slideDown("slow"),$("#contentTypeTranslationForm").slideUp("slow")}})}))}));